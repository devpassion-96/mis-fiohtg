<!-- src/app/components/vehicle-drivers/allocation-list/allocation-list.component.html -->
<div class="card mt-5">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h3 class="card-title">Driver–Vehicle Allocations</h3>
    <button class="btn btn-sm btn-outline-secondary" (click)="loadData()" [disabled]="loading">
      Refresh
    </button>
  </div>

  <div class="card-body">
    <div *ngIf="loading">Loading…</div>
    <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

    <div class="table-responsive" *ngIf="!loading && !error && rows.length">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Driver</th>
            <th>Vehicle</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Returned</th>
            <!-- <th style="width: 220px;">Actions</th> -->
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let r of rows | paginate: { itemsPerPage: itemsPerPage, currentPage: p }">
            <td>{{ r.driverName }}</td>
            <td>{{ r.vehicleNumber }}</td>
            <td>{{ formatDateForCell(r.startDate) }}</td>
            <td>{{ formatDateForCell(r.endDate) }}</td>
            <!-- <td>
              <span class="badge" [ngClass]="r.completed ? 'badge-success' : 'badge-secondary'">
                {{ r.completed ? 'Yes' : 'No' }}
              </span>
            </td> -->
            <td>{{ r.completed ? 'Yes' : 'No' }}</td>

            <!-- <td>
              <button class="btn btn-sm btn-outline-success mr-2" (click)="markCompleted(r)" [disabled]="r.completed">
                Mark Completed
              </button>
              <button class="btn btn-sm btn-outline-danger" (click)="delete(r)">
                Delete
              </button>
            </td> -->
          </tr>
        </tbody>
      </table>

      <div class="card-footer">
          <pagination-controls (pageChange)="p = $event"></pagination-controls>
        </div>
    </div>

    <div *ngIf="!loading && !error && !rows.length" class="text-muted">
      No allocations found.
    </div>
  </div>
</div>
